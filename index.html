<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>デュエル・オブ・フュージョン</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="start-screen">
        <h1>デュエル・オブ・フュージョン</h1>
        <button id="start-game-button">ゲーム開始</button>
        <button id="deck-edit-button">デッキ編集</button>
        <button id="view-rules-button">ルール確認</button>
    </div>

    <div class="game-container" style="display: none;">

        <div class="main-board">
            <div class="player-zone opponent-dm-zone">
                <div class="deck-masters-zone opponent-deck-masters-zone"></div>
            </div>
            <div class="player-zone opponent-field-zone-wrapper">
                <div class="field-zone opponent-field-zone"></div>
            </div>
            <div class="battlefield-divider"></div>
            <div class="player-zone self-field-zone-wrapper">
                <div class="field-zone self-field-zone"></div>
            </div>
            <div class="player-zone self-dm-zone">
                <div class="deck-masters-zone self-deck-masters-zone"></div>
            </div>
            <div class="player-zone self-hand-display-area">
                <div class="hand-zone self-hand-zone"></div>
            </div>
        </div>

        <div class="ui-overlay">
            <div class="player-hud opponent-hud">
                <h4>相手プレイヤー</h4>
                <div>マナ: <span id="opponent-current-mana">0</span>/<span id="opponent-max-mana">1</span></div>
                <div>手札: <span id="opponent-hand-count">0</span>枚</div>
                <div>破壊DM: <span id="opponent-destroyed-dms-count">0</span>/5</div>
            </div>

            <div class="player-hud self-hud">
                <h4>自分プレイヤー</h4>
                <div>マナ: <span id="self-current-mana">0</span>/<span id="self-max-mana">1</span></div>
                <div>手札: <span id="self-hand-count">0</span>枚</div>
                <div>破壊DM: <span id="self-destroyed-dms-count">0</span>/5</div>
            </div>

            <div class="deck-info-hud">
                <div class="main-deck-display">山札: <span id="main-deck-cards-count">60</span></div>
                <div id="graveyard-display-area" class="graveyard-display clickable-zone" title="墓地を確認する">
                    墓地: <span id="graveyard-count">0</span>枚
                </div>
            </div>

            <div class="phase-hud">
                <div>ターン: <span id="turn-count">1</span></div>
                <div><span id="current-turn-player">あなた</span> のターン</div>
                <div>フェーズ: <span id="current-phase">ドロー</span></div>
                <hr>
                <div class="action-buttons">
                    <button id="draw-button" class="action-button">ドロー</button>
                    <button id="attack-button" class="action-button">攻撃フェーズへ</button>
                    <button id="end-turn-button" class="action-button large-button">ターン終了</button>
                </div>
            </div>
            
            <div class="game-over-controls">
                 <button id="reset-game-button" style="display: none;">もう一度遊ぶ</button>
            </div>
        </div>

    </div>

    <div id="deck-editor-screen" style="display: none;">
        <div class="deck-editor-dm-area">
            <div class="available-dms-section">
                <h2>利用可能デッキマスター</h2>
                <div id="available-dms-pool" class="card-list-area"></div>
            </div>
            <div class="current-dms-section">
                <h2>選択中デッキマスター (<span id="current-dms-count">0</span>/5枚)</h2>
                <div id="current-dms-display" class="card-list-area"></div>
            </div>
        </div>
        <div class="deck-editor-main-area">
            <div class="available-cards-section">
                <h2>利用可能カード (<span id="available-cards-count">0</span>種類)</h2>
                <div id="available-cards-pool" class="card-list-area"></div>
            </div>
            <div class="current-deck-section">
                <h2>編集中デッキ (<span id="current-deck-card-count">0</span>/30枚)</h2>
                <div id="current-deck-display" class="card-list-area"></div>
            </div>
        </div>
        <div class="deck-editor-controls">
            <p>※カードをシングルクリックでデッキに追加/削除。長押しで詳細表示。</p>
            <button id="save-deck-button">デッキ保存</button>
            <button id="clear-deck-button">クリア</button>
            <button id="exit-deck-editor-button">戻る</button>
        </div>
    </div>

    <div id="rules-screen" style="display: none;">
        <h2>デュエル・オブ・フュージョン - ルール</h2>
        <div id="rules-content-wrapper">
            <pre id="rules-content"></pre>
        </div>
        <button id="close-rules-button">閉じる</button>
    </div>

    <div id="card-detail-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close-button" id="modal-close-button">&times;</span>
            <div id="modal-card-detail-area"></div>
        </div>
    </div>

    <div id="graveyard-view-modal" class="modal" style="display:none;">
        <div class="modal-content large-modal">
            <span class="modal-close-button" id="graveyard-modal-close-button">&times;</span>
            <h2>墓地 (<span id="graveyard-modal-card-count">0</span>枚)</h2>
            <div id="graveyard-cards-area" class="modal-cards-list">
                </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>